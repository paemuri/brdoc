package brdoc

import (
	"testing"
)

func TestIsPhone(t *testing.T) {
	for i, tc := range []struct {
		name     string
		doc      string
		valid    bool
		ufs      []UF
		validUFs bool
	}{
		{"InvalidData", "3467875434578764345789654", false, []UF{}, false},
		{"InvalidData", "", false, []UF{}, false},
		{"InvalidData", "AAAAAAAA", false, []UF{}, false},

		{"InvalidDDI", "+0 1199999999", false, []UF{}, false},
		{"InvalidDDI", "+1 1199999999", false, []UF{}, false},
		{"InvalidDDI", "+5 1199999999", false, []UF{}, false},
		{"InvalidDDI", "+9 1199999999", false, []UF{}, false},
		{"InvalidDDI", "+51 1199999999", false, []UF{}, false},
		{"InvalidDDI", "+555 1199999999", false, []UF{}, false},

		{"InvalidDDD", "0099999999", false, []UF{}, false},
		{"InvalidDDD", "0199999999", false, []UF{}, false},
		{"InvalidDDD", "0299999999", false, []UF{}, false},
		{"InvalidDDD", "0399999999", false, []UF{}, false},
		{"InvalidDDD", "0499999999", false, []UF{}, false},
		{"InvalidDDD", "0599999999", false, []UF{}, false},
		{"InvalidDDD", "0699999999", false, []UF{}, false},
		{"InvalidDDD", "0799999999", false, []UF{}, false},
		{"InvalidDDD", "0899999999", false, []UF{}, false},
		{"InvalidDDD", "0999999999", false, []UF{}, false},
		{"InvalidDDD", "1099999999", false, []UF{}, false},
		{"InvalidDDD", "2099999999", false, []UF{}, false},
		{"InvalidDDD", "2399999999", false, []UF{}, false},
		{"InvalidDDD", "2599999999", false, []UF{}, false},
		{"InvalidDDD", "2699999999", false, []UF{}, false},
		{"InvalidDDD", "2999999999", false, []UF{}, false},
		{"InvalidDDD", "3099999999", false, []UF{}, false},
		{"InvalidDDD", "3699999999", false, []UF{}, false},
		{"InvalidDDD", "3999999999", false, []UF{}, false},
		{"InvalidDDD", "4099999999", false, []UF{}, false},
		{"InvalidDDD", "5099999999", false, []UF{}, false},
		{"InvalidDDD", "5299999999", false, []UF{}, false},
		{"InvalidDDD", "5699999999", false, []UF{}, false},
		{"InvalidDDD", "5799999999", false, []UF{}, false},
		{"InvalidDDD", "5899999999", false, []UF{}, false},
		{"InvalidDDD", "5999999999", false, []UF{}, false},
		{"InvalidDDD", "6099999999", false, []UF{}, false},
		{"InvalidDDD", "7099999999", false, []UF{}, false},
		{"InvalidDDD", "7299999999", false, []UF{}, false},
		{"InvalidDDD", "7699999999", false, []UF{}, false},
		{"InvalidDDD", "7899999999", false, []UF{}, false},
		{"InvalidDDD", "8099999999", false, []UF{}, false},
		{"InvalidDDD", "9099999999", false, []UF{}, false},

		{"InvalidNumber", "+55 11 999999", false, []UF{}, false},
		{"InvalidNumber", "+55 11 9999999", false, []UF{}, false},
		{"InvalidNumber", "+55 11 19999999", false, []UF{}, false},
		{"InvalidNumber", "+55 11 199999999", false, []UF{}, false},
		{"InvalidNumber", "+55 11 299999999", false, []UF{}, false},
		{"InvalidNumber", "+55 11 399999999", false, []UF{}, false},
		{"InvalidNumber", "+55 11 499999999", false, []UF{}, false},
		{"InvalidNumber", "+55 11 599999999", false, []UF{}, false},
		{"InvalidNumber", "+55 11 699999999", false, []UF{}, false},
		{"InvalidNumber", "+55 11 799999999", false, []UF{}, false},
		{"InvalidNumber", "+55 11 899999999", false, []UF{}, false},
		{"InvalidNumber", "+55 11 9999999999", false, []UF{}, false},
		{"InvalidNumber", "+55 11 99999999999", false, []UF{}, false},

		{"InvalidFormat", "+55 11 999 999 999", false, []UF{}, false},
		{"InvalidFormat", "+ 55 11 999999999", false, []UF{}, false},
		{"InvalidFormat", "+55 11 9999-99999", false, []UF{}, false},
		{"InvalidFormat", "+55 11 9999.99999", false, []UF{}, false},
		{"InvalidFormat", "+55 11 9999 99999", false, []UF{}, false},
		{"InvalidFormat", "+55 11 99999/9999", false, []UF{}, false},
		{"InvalidFormat", "+55 11 99999\\9999", false, []UF{}, false},
		{"InvalidFormat", "+55 (11 999999999", false, []UF{}, false},
		{"InvalidFormat", "+55 11) 999999999", false, []UF{}, false},

		{"InvalidUF", "1199999999", true, []UF{RJ}, false},
		{"InvalidUF", "1299999999", true, []UF{RJ}, false},
		{"InvalidUF", "1399999999", true, []UF{RJ}, false},
		{"InvalidUF", "1499999999", true, []UF{RJ}, false},
		{"InvalidUF", "1599999999", true, []UF{RJ}, false},
		{"InvalidUF", "1699999999", true, []UF{RJ}, false},
		{"InvalidUF", "1799999999", true, []UF{RJ}, false},
		{"InvalidUF", "1899999999", true, []UF{RJ}, false},
		{"InvalidUF", "1999999999", true, []UF{RJ}, false},
		{"InvalidUF", "2199999999", true, []UF{ES}, false},
		{"InvalidUF", "2299999999", true, []UF{ES}, false},
		{"InvalidUF", "2499999999", true, []UF{ES}, false},
		{"InvalidUF", "2799999999", true, []UF{MG}, false},
		{"InvalidUF", "2899999999", true, []UF{MG}, false},
		{"InvalidUF", "3199999999", true, []UF{PR}, false},
		{"InvalidUF", "3299999999", true, []UF{PR}, false},
		{"InvalidUF", "3399999999", true, []UF{PR}, false},
		{"InvalidUF", "3499999999", true, []UF{PR}, false},
		{"InvalidUF", "3599999999", true, []UF{PR}, false},
		{"InvalidUF", "3799999999", true, []UF{PR}, false},
		{"InvalidUF", "3899999999", true, []UF{PR}, false},
		{"InvalidUF", "4199999999", true, []UF{SC}, false},
		{"InvalidUF", "4299999999", true, []UF{SC}, false},
		{"InvalidUF", "4399999999", true, []UF{SC}, false},
		{"InvalidUF", "4499999999", true, []UF{SC}, false},
		{"InvalidUF", "4599999999", true, []UF{SC}, false},
		{"InvalidUF", "4699999999", true, []UF{SC}, false},
		{"InvalidUF", "4799999999", true, []UF{RS}, false},
		{"InvalidUF", "4899999999", true, []UF{RS}, false},
		{"InvalidUF", "4999999999", true, []UF{RS}, false},
		{"InvalidUF", "5199999999", true, []UF{DF}, false},
		{"InvalidUF", "5499999999", true, []UF{DF}, false},
		{"InvalidUF", "5599999999", true, []UF{DF}, false},
		{"InvalidUF", "6199999999", true, []UF{GO}, false},
		{"InvalidUF", "6299999999", true, []UF{TO}, false},
		{"InvalidUF", "6399999999", true, []UF{MT}, false},
		{"InvalidUF", "6499999999", true, []UF{TO}, false},
		{"InvalidUF", "6599999999", true, []UF{MS}, false},
		{"InvalidUF", "6699999999", true, []UF{MS}, false},
		{"InvalidUF", "6799999999", true, []UF{AC}, false},
		{"InvalidUF", "6899999999", true, []UF{RO}, false},
		{"InvalidUF", "6999999999", true, []UF{BA}, false},
		{"InvalidUF", "7199999999", true, []UF{SE}, false},
		{"InvalidUF", "7399999999", true, []UF{SE}, false},
		{"InvalidUF", "7499999999", true, []UF{SE}, false},
		{"InvalidUF", "7599999999", true, []UF{SE}, false},
		{"InvalidUF", "7799999999", true, []UF{SE}, false},
		{"InvalidUF", "7999999999", true, []UF{PE}, false},
		{"InvalidUF", "8199999999", true, []UF{AL}, false},
		{"InvalidUF", "8299999999", true, []UF{PB}, false},
		{"InvalidUF", "8399999999", true, []UF{RN}, false},
		{"InvalidUF", "8499999999", true, []UF{CE}, false},
		{"InvalidUF", "8599999999", true, []UF{PI}, false},
		{"InvalidUF", "8699999999", true, []UF{PA}, false},
		{"InvalidUF", "8799999999", true, []UF{AL}, false},
		{"InvalidUF", "8899999999", true, []UF{PI}, false},
		{"InvalidUF", "8999999999", true, []UF{PA}, false},
		{"InvalidUF", "9199999999", true, []UF{AM}, false},
		{"InvalidUF", "9299999999", true, []UF{PA}, false},
		{"InvalidUF", "9399999999", true, []UF{RR}, false},
		{"InvalidUF", "9499999999", true, []UF{RR}, false},
		{"InvalidUF", "9599999999", true, []UF{AP}, false},
		{"InvalidUF", "9699999999", true, []UF{AM}, false},
		{"InvalidUF", "9799999999", true, []UF{MA}, false},
		{"InvalidUF", "9899999999", true, []UF{SP}, false},
		{"InvalidUF", "9999999999", true, []UF{SP}, false},

		// All possible formats.
		{"Valid", "+55 (11) 99999-9999", true, []UF{SP}, true},
		{"Valid", "+55(11)99999-9999", true, []UF{SP}, true},
		{"Valid", "+55(11)9999-9999", true, []UF{SP}, true},
		{"Valid", "55 (11) 99999-9999", true, []UF{SP}, true},
		{"Valid", "0055 11 999999999", true, []UF{SP}, true},
		{"Valid", "005511999999999", true, []UF{SP}, true},
		{"Valid", "00551199999999", true, []UF{SP}, true},
		{"Valid", "(11) 99999-9999", true, []UF{SP}, true},
		{"Valid", "(11) 99999.9999", true, []UF{SP}, true},
		{"Valid", "(11) 99999 9999", true, []UF{SP}, true},
		{"Valid", "(11) 9-9999-9999", true, []UF{SP}, true},
		{"Valid", "(11) 9-9999.9999", true, []UF{SP}, true},
		{"Valid", "(11) 9-9999 9999", true, []UF{SP}, true},
		{"Valid", "(11) 9.9999-9999", true, []UF{SP}, true},
		{"Valid", "(11) 9.9999.9999", true, []UF{SP}, true},
		{"Valid", "(11) 9.9999 9999", true, []UF{SP}, true},
		{"Valid", "(11) 9 9999-9999", true, []UF{SP}, true},
		{"Valid", "(11) 9 9999.9999", true, []UF{SP}, true},
		{"Valid", "(11) 9 9999 9999", true, []UF{SP}, true},
		{"Valid", "(11) 9999-9999", true, []UF{SP}, true},
		{"Valid", "(11) 9999.9999", true, []UF{SP}, true},
		{"Valid", "(11) 9999 9999", true, []UF{SP}, true},
		{"Valid", "11999999999", true, []UF{SP}, true},
		{"Valid", "1199999999", true, []UF{SP}, true},
		{"Valid", "1129999999", true, []UF{SP}, true},
		{"Valid", "1139999999", true, []UF{SP}, true},
		{"Valid", "1149999999", true, []UF{SP}, true},
		{"Valid", "1159999999", true, []UF{SP}, true},
		{"Valid", "1169999999", true, []UF{SP}, true},
		{"Valid", "1179999999", true, []UF{SP}, true},
		{"Valid", "1189999999", true, []UF{SP}, true},
		// All possible DDD digits.
		{"Valid", "1199999999", true, []UF{SP}, true},
		{"Valid", "1299999999", true, []UF{SP}, true},
		{"Valid", "1399999999", true, []UF{SP}, true},
		{"Valid", "1499999999", true, []UF{SP}, true},
		{"Valid", "1599999999", true, []UF{SP}, true},
		{"Valid", "1699999999", true, []UF{SP}, true},
		{"Valid", "1799999999", true, []UF{SP}, true},
		{"Valid", "1899999999", true, []UF{SP}, true},
		{"Valid", "1999999999", true, []UF{SP}, true},
		{"Valid", "2199999999", true, []UF{RJ}, true},
		{"Valid", "2299999999", true, []UF{RJ}, true},
		{"Valid", "2499999999", true, []UF{RJ}, true},
		{"Valid", "2799999999", true, []UF{ES}, true},
		{"Valid", "2899999999", true, []UF{ES}, true},
		{"Valid", "3199999999", true, []UF{MG}, true},
		{"Valid", "3299999999", true, []UF{MG}, true},
		{"Valid", "3399999999", true, []UF{MG}, true},
		{"Valid", "3499999999", true, []UF{MG}, true},
		{"Valid", "3599999999", true, []UF{MG}, true},
		{"Valid", "3799999999", true, []UF{MG}, true},
		{"Valid", "3899999999", true, []UF{MG}, true},
		{"Valid", "4199999999", true, []UF{PR}, true},
		{"Valid", "4299999999", true, []UF{PR}, true},
		{"Valid", "4399999999", true, []UF{PR}, true},
		{"Valid", "4499999999", true, []UF{PR}, true},
		{"Valid", "4599999999", true, []UF{PR}, true},
		{"Valid", "4699999999", true, []UF{PR}, true},
		{"Valid", "4799999999", true, []UF{SC}, true},
		{"Valid", "4899999999", true, []UF{SC}, true},
		{"Valid", "4999999999", true, []UF{SC}, true},
		{"Valid", "5199999999", true, []UF{RS}, true},
		{"Valid", "5499999999", true, []UF{RS}, true},
		{"Valid", "5599999999", true, []UF{RS}, true},
		{"Valid", "6199999999", true, []UF{DF}, true},
		{"Valid", "6299999999", true, []UF{GO}, true},
		{"Valid", "6399999999", true, []UF{TO}, true},
		{"Valid", "6499999999", true, []UF{GO}, true},
		{"Valid", "6599999999", true, []UF{MT}, true},
		{"Valid", "6699999999", true, []UF{MT}, true},
		{"Valid", "6799999999", true, []UF{MS}, true},
		{"Valid", "6899999999", true, []UF{AC}, true},
		{"Valid", "6999999999", true, []UF{RO}, true},
		{"Valid", "7199999999", true, []UF{BA}, true},
		{"Valid", "7399999999", true, []UF{BA}, true},
		{"Valid", "7499999999", true, []UF{BA}, true},
		{"Valid", "7599999999", true, []UF{BA}, true},
		{"Valid", "7799999999", true, []UF{BA}, true},
		{"Valid", "7999999999", true, []UF{SE}, true},
		{"Valid", "8199999999", true, []UF{PE}, true},
		{"Valid", "8299999999", true, []UF{AL}, true},
		{"Valid", "8399999999", true, []UF{PB}, true},
		{"Valid", "8499999999", true, []UF{RN}, true},
		{"Valid", "8599999999", true, []UF{CE}, true},
		{"Valid", "8699999999", true, []UF{PI}, true},
		{"Valid", "8799999999", true, []UF{PE}, true},
		{"Valid", "8899999999", true, []UF{CE}, true},
		{"Valid", "8999999999", true, []UF{PI}, true},
		{"Valid", "9199999999", true, []UF{PA}, true},
		{"Valid", "9299999999", true, []UF{AM}, true},
		{"Valid", "9399999999", true, []UF{PA}, true},
		{"Valid", "9499999999", true, []UF{PA}, true},
		{"Valid", "9599999999", true, []UF{RR}, true},
		{"Valid", "9699999999", true, []UF{AP}, true},
		{"Valid", "9799999999", true, []UF{AM}, true},
		{"Valid", "9899999999", true, []UF{MA}, true},
		{"Valid", "9999999999", true, []UF{MA}, true},
		// Validating multiple or no UFs.
		{"Valid", "1199999999", true, []UF{BA, SP, MG}, true},
		{"Valid", "1299999999", true, []UF{SP, SP, SP}, true},
		{"Valid", "1399999999", true, []UF{}, true},
	} {
		t.Run(testName(i, tc.name), func(t *testing.T) {
			validFrom := IsPhoneFrom(tc.doc, tc.ufs...)
			assertEqual(t, validFrom, tc.valid && tc.validUFs)

			valid, uf := IsPhone(tc.doc)
			assertEqual(t, valid, tc.valid)

			if tc.validUFs && len(tc.ufs) == 1 {
				assertEqual(t, uf, tc.ufs[0])
			}
		})
	}
}
